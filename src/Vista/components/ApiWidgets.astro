---

---

<section id="api-widgets" style="margin:1rem 0; padding:1rem; border:1px solid #e5e7eb; border-radius:12px;">
  <h2 style="margin:0 0 0.5rem 0;">✨ Widgets en Vivo</h2>
  <div style="display:grid; gap:12px; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));">
    
    <article style="padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
      <h3 style="margin-top:0;">💪 Frase Motivacional</h3>
      <p id="quote-text" style="min-height:48px; margin:0;"></p>
      <small id="quote-author"></small>
    </article>
    
    <article style="padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
      <h3 style="margin-top:0;">🛍️ Productos</h3>
      <div id="products" style="display:flex; gap:8px; align-items:flex-start; overflow:auto;"></div>
    </article>
    
    <article style="padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
      <h3 style="margin-top:0;">💡 Consejo del Día</h3>
      <p id="advice" style="min-height:48px; margin:0;"></p>
    </article>
    
    <article style="padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
      <h3 style="margin-top:0;">😂 Chisme del Día</h3>
      <p id="joke-setup" style="margin:0;"></p>
      <p id="joke-punchline" style="font-weight:600; margin:0;"></p>
    </article>

    <article style="padding:12px; border:1px solid #e5e7eb; border-radius:12px;">
      <h3 style="margin-top:0;">📍 Tu Ubicación</h3>
      <p id="user-location" style="min-height:48px; margin:0; color:#374151;"></p>
    </article>

  </div>
</section>

<script>
async function safeFetch(url) {
  try {
    const res = await fetch(url, { cache: "no-store" });
    if (!res.ok) throw new Error(res.status + " " + res.statusText);
    return await res.json();
  } catch (err) {
    console.error("API error:", url, err);
    return null;
  }
}

(async () => {
  // 1) Frase motivacional
  const quoteData = await safeFetch("https://api.quotable.io/random?tags=inspirational|motivational");
  if (quoteData) {
    document.getElementById("quote-text").textContent = "“" + quoteData.content + "”";
    document.getElementById("quote-author").textContent = "— " + quoteData.author;
  }

  // 2) Productos
  const products = await safeFetch("https://fakestoreapi.com/products?limit=3");
  const productsEl = document.getElementById("products");
  if (products && Array.isArray(products)) {
    productsEl.innerHTML = "";
    products.forEach(p => {
      const card = document.createElement("div");
      card.style.border = "1px solid #e5e7eb";
      card.style.borderRadius = "10px";
      card.style.padding = "8px";
      card.style.minWidth = "140px";
      card.style.flex = "0 0 auto";
      card.innerHTML = `
        <img src="${p.image}" alt="${p.title}" style="width:100%; height:100px; object-fit:contain" />
        <div style="font-size:12px; margin-top:6px;">${p.title}</div>
        <div style="font-weight:700;">$ ${p.price}</div>
      `;
      productsEl.appendChild(card);
    });
  }

  // 3) Consejo
  const advice = await safeFetch("https://api.adviceslip.com/advice");
  if (advice?.slip?.advice) {
    document.getElementById("advice").textContent = advice.slip.advice;
  }

  // 4) Chiste
  const joke = await safeFetch("https://official-joke-api.appspot.com/random_joke");
  if (joke) {
    document.getElementById("joke-setup").textContent = joke.setup;
    document.getElementById("joke-punchline").textContent = joke.punchline;
  }

  // 5) Ubicación
  const locationData = await safeFetch("http://ip-api.com/json/");
  if (locationData) {
    document.getElementById("user-location").textContent =
      "Bienvenido desde 🌎 " + locationData.country;
  }
})();
</script>
